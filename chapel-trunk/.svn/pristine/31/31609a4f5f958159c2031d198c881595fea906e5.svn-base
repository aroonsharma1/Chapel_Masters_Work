\lstdefinelanguage{chapel}
  {
    morekeywords={
      and, array, atomic,
      break,
      call, class, cobegin, config, const, constructor, continue,
      def, distribute, do, domain,
      else, enum, except,
      for, forall, function,
      goto,
      if, implements, in, inout, _invariant, iterator,
      let, like,
      module,
      nil, not,
      or, ordered, otherwise, out,
      param, _private, private, public,
      record, _release, repeat, return,
      select, serial, subtype,
      then, to, type, typeselect,
      union, until, _unordered,
      var, _view,
      when, where, while, with,
      yield
    },
    sensitive=false,
    mathescape=false,
    morecomment=[l]{//},
    morecomment=[s]{/*}{*/},
    morestring=[b]",
    basicstyle=\big\tt,
    keywordstyle=\bf,
    commentstyle=\em,
    showstringspaces=false,
    flexiblecolumns=false,
    numbers=left,
    numbersep=5pt,
    numberstyle=\tiny,
    numberblanklines=false,
    stepnumber=0
  }

\newcommand{\chpl}[1]{\lstinline[language=chapel,basicstyle=\normalsize\tt,keywordstyle=]!#1!}

\lstnewenvironment{chapel}{\lstset{language=chapel}}{}
